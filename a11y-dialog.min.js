/*! a11y-dialog 3.0.0 — © Edenspiekermann */
!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function i(t,i){return e((i||document).querySelectorAll(t))}function n(t){return NodeList.prototype.isPrototypeOf(t)?e(t):Element.prototype.isPrototypeOf(t)?[t]:"string"==typeof t?i(t):void 0}function s(t){var e=o(t);e.length&&e[0].focus()}function o(t){return i(c.join(","),t).filter(function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)})}function h(t,e){var i=o(t),n=i.indexOf(document.activeElement);e.shiftKey&&0===n?(i[i.length-1].focus(),e.preventDefault()):e.shiftKey||n!==i.length-1||(i[0].focus(),e.preventDefault())}function r(t){var i=e(t.parentNode.childNodes);return i.splice(i.indexOf(t),1),i}function d(t,e){this._show=this.show.bind(this),this._hide=this.hide.bind(this),this._maintainFocus=this._maintainFocus.bind(this),this._bindKeypress=this._bindKeypress.bind(this),this.node=t,this._listeners={show:[],hide:[],destroy:[]},this._targets=n(e)||r(this.node),this.node.hasAttribute("aria-hidden")&&(this.shown=!JSON.parse(this.node.getAttribute("aria-hidden"))),this._openers=i('[data-a11y-dialog-show="'+this.node.id+'"]'),this._openers.forEach(function(t){t.addEventListener("click",this._show)}.bind(this)),this._closers=i("[data-a11y-dialog-hide]",this.node).concat(i('[data-a11y-dialog-hide="'+this.node.id+'"]')),this._closers.forEach(function(t){t.addEventListener("click",this._hide)}.bind(this))}var a,c=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'];d.prototype._bindKeypress=function(t){this.shown&&27===t.which&&(t.preventDefault(),this.hide()),this.shown&&9===t.which&&h(this.node,t)},d.prototype._maintainFocus=function(t){this.shown&&!this.node.contains(t.target)&&s(this.node)},d.prototype.show=function(t){this.shown||(this.shown=!0,this.node.removeAttribute("aria-hidden"),this._targets.forEach(function(t){var e=t.getAttribute("aria-hidden");e&&t.setAttribute("data-a11y-dialog-original",e),t.setAttribute("aria-hidden","true")}),a=document.activeElement,s(this.node),document.body.addEventListener("focus",this._maintainFocus,!0),document.addEventListener("keydown",this._bindKeypress),this._listeners.show.forEach(function(e){e(this.node,t?t.target:void 0)}.bind(this)))},d.prototype.hide=function(t){this.shown&&(this.shown=!1,this.node.setAttribute("aria-hidden","true"),this._targets.forEach(function(t){var e=t.getAttribute("data-a11y-dialog-original");e?(t.setAttribute("aria-hidden",e),t.removeAttribute("data-a11y-dialog-original")):t.removeAttribute("aria-hidden")}),a&&a.focus(),document.body.removeEventListener("focus",this._maintainFocus,!0),document.removeEventListener("keydown",this._bindKeypress),this._listeners.hide.forEach(function(e){e(this.node,t?t.target:void 0)}.bind(this)))},d.prototype.destroy=function(){this.hide(),this._openers.forEach(function(t){t.removeEventListener("click",this._show)}.bind(this)),this._closers.forEach(function(t){t.removeEventListener("click",this._hide)}.bind(this)),this._listeners.destroy.forEach(function(t){t(this.node)}.bind(this))},d.prototype.on=function(t,e){return this._listeners[t].push(e),this},d.prototype.off=function(t,e){var i=this._listeners[t].indexOf(e);return i>-1&&this._listeners[t].splice(i,1),this},"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=d:"function"==typeof define&&define.amd?define("A11yDialog",[],function(){return d}):"object"==typeof t&&(t.A11yDialog=d)}(this);
